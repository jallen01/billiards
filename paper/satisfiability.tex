%!TEX root = paper.tex

\begin{lemma}\label{lem:h-extension}
	A finite sequence $\alpha$ is a valid collision sequence iff there exists at least one valid collision sequence containing $\alpha$ that starts and ends with an h.
\end{lemma}

\begin{proof}
	TODO: can extend any collision sequence to any length. 
\end{proof}

Because of Lemma \ref{lem:h-extension}, without loss of generality we can confine ourselves to only look at collision sequences that start and end with an h.

% -----------------------------------------------------------------------------

We will now show how the sequences in the $\beta$ group relate to the original problem of validating a collision sequence. In the process we will generate the interval sizes in each $\beta^{(j)}$ visualization which will form a new sequence $a$ (this statment will be made clearer shortly). 

Let us start with $a_0 \coloneqq m, a_1 \coloneqq 1$, which is the spacing of v collisions and h collisions respectively in the parametric representation. The rest of the $a$ sequence is generated inductively. For some $2 \le j < j_f$, assume that $a_{j-1}, a_{j-2}$ exist. 

\begin{definition}
	Define $a_j$ as follows

	\begin{align}
		a_{j} \coloneqq \beta^{(j-2)}_{max} a_{j-1} - a_{j-2} \qquad &\text{for} \quad 2 \le j < j_f
	\end{align}
\end{definition}

From now on we will only consider collision sequences, where each non-terminal $\beta^{(j)}$ starts and ends with $\beta^{(j)}_{min}$.

% -----------------------------------------------------------------------------

\begin{theorem}\label{thm:beta_i}
	A collision sequence is valid if the following is true for all $j$

	\begin{equation}
		\beta^{(j)}_i \in \cbracket{\floor{\frac{a_{j-2}}{a_{j-1}}}, \ceil{\frac{a_{j-2}}{a_{j-1}}}}
	\end{equation}
\end{theorem}

\begin{proof}
	This follows directly from Lemma \ref{lem:interval-ticks}.
\end{proof}

% -----------------------------------------------------------------------------

\begin{theorem}
	For every valid collision sequence, $\lim_{n \to \infty} a = 0$
\end{theorem}

\begin{proof}
	From the definition of $a_j$

	\begin{align}\label{eq:a-def-2}
		a_j& = \beta^{(j-2)}_{max} \, a_{j-1} - a_{j-2}\\
		& =  \ceil{\frac{a_{j-2}}{a_{j-1}}} a_{j-1} - a_{j-2}
	\end{align}

	Now from the definition of the ceiling function, we know that

	\begin{equation}
		0 \le \ceil{\frac{a_{j-2}}{a_{j-1}}} - \frac{a_{j-2}}{a_{j-1}} < 1
	\end{equation}

	Rearranging, we get

	\begin{equation}
		0 \le \ceil{\frac{a_{j-2}}{a_{j-1}}} a_{j-1} - a_{j-2} < a_{j-1}
	\end{equation}

	Combining the above equation with Equation \ref{eq:a-def-2}, we get

	\begin{equation}
		0 \le a_j < a_{j-1}
	\end{equation}

	Thus $a$ is strictly decreasing and bounded below by 0, so $\lim_{n \to \infty} a_n = 0$.
\end{proof}